---
title: 一文读懂计算机网络四层模型
date: 2026-02-20 17:13:00
tags: [计算机网络, 网络基础, 入门教程]
categories: 技术
---

# 一文读懂计算机网络四层模型

你有没有想过，当你在浏览器输入一个网址，敲下回车，到页面加载出来，这中间到底发生了什么？

答案是：**网络分层传输。**

今天用最通俗的方式，带你彻底理解计算机网络的四层模型。

---

## 🌰 从寄快递理解网络分层

在理解技术之前，我们先用一个生活中的例子来类比。

**场景：** 你从上海寄一个快递到北京。

### 快递公司怎么工作？

```
第4层：快递公司服务    → 你把包裹交给快递员
第3层：运输网络        → 快递从上海站点送到北京站点
第2层：运输工具        → 飞机、卡车、火车
第1层：公路/航线       → 实际走的路
```

**你只需要做的是：**
1. 把包裹交给快递员（第4层）
2. 其他的事情，快递公司帮你搞定

**网络也是一样的道理！** 你只需要点击"发送消息"，剩下的传输工作由网络分层帮你完成。

---

## 📚 四层模型详解

计算机网络从下到上分为四层：

```
┌─────────────────────────────────────┐
│  应用层 (Application Layer)         │  ← 第四层
├─────────────────────────────────────┤
│  传输层 (Transport Layer)           │  ← 第三层
├─────────────────────────────────────┤
│  网络层 (Internet Layer)             │  ← 第二层
├─────────────────────────────────────┤
│  链路层 (Link Layer)                │  ← 第一层
└─────────────────────────────────────┘
```

下面我们一层一层来讲解。

---

## 第一层：链路层（Link Layer）

### 🎯 核心问题
**如何在"同一网络"内，把数据传给目标设备？**

### 💡 类比
就像小区里的快递：**只知道小区内的地址**，负责把包裹送到收件人手中。

### 关键概念

| 概念 | 说明 | 类比 |
|------|------|------|
| **MAC 地址** | 网卡的物理地址，全球唯一 | 身份证号 |
| **交换机** | 在局域网内转发数据 | 小区快递员 |
| **帧 (Frame)** | 链路层传输的数据单位 | 快递包裹 |

### 常见协议
- **Ethernet (以太网)**：最常见的局域网协议
- **Wi-Fi (802.11)**：无线网络协议

### 实际作用
- 把数据封装成**帧**
- 通过 MAC 地址在局域网内**寻找目标设备**
- 处理物理地址寻址

---

## 第二层：网络层（Internet Layer）

### 🎯 核心问题
**如何在"不同网络"之间，把数据从A传到B？**

### 💡 类比
就像**跨城市快递**：从上海到北京，需要知道城市的**邮政编码**。

### 关键概念

| 概念 | 说明 | 类比 |
|------|------|------|
| **IP 地址** | 网络中的逻辑地址 | 邮政编码/门牌号 |
| **路由器** | 连接不同网络的设备 | 中转站 |
| **数据包 (Packet)** | 网络层传输的数据单位 | 快递包裹 |

### IP 地址详解

**IPv4 地址格式：** `192.168.1.100`

```
┌─────────────────┬─────────────────┐
│   网络部分       │    主机部分     │
└─────────────────┴─────────────────┘
  192.168.1        .100
```

**公网 IP vs 私网 IP：**
- **公网 IP：** 全球唯一，能被互联网访问（像身份证号）
- **私网 IP：** 局域网内使用（像小区门牌号）

```
私网 IP 范围：
- 10.0.0.0 ~ 10.255.255.255
- 172.16.0.0 ~ 172.31.255.255
- 192.168.0.0 ~ 192.168.255.255
```

### 常见协议
- **IP (Internet Protocol)**：核心协议
- **ICMP**：网络诊断（如 ping）
- **ARP**：IP 转 MAC 地址

### 实际作用
- **路由选择**：选择最佳传输路径
- **IP 寻址**：找到目标网络
- **分组转发**：把数据从源传到目的地

---

## 第三层：传输层（Transport Layer）

### 🎯 核心问题
**数据到达目标设备后，如何准确交给对应的应用程序？**

### 💡 类比
就像**快递代收点**：快递到了小区，还需要找到具体的收件人。

### 关键概念

| 概念 | 说明 | 类比 |
|------|------|------|
| **端口 (Port)** | 应用程序的"门牌号" | 房间号 |
| **TCP** | 面向连接、可靠传输 | 挂号信 |
| **UDP** | 无连接、不可靠传输 | 普通平信 |

### 端口详解

**端口号范围：** 0 ~ 65535

```
常用端口：
┌──────────────┬────────────┐
│   端口        │   服务     │
├──────────────┼────────────┤
│     80       │   HTTP    │
│    443       │   HTTPS   │
│     22       │   SSH     │
│     25       │   SMTP    │
│   3306       │   MySQL   │
└──────────────┴────────────┘
```

### TCP vs UDP 对比

| 特性 | TCP | UDP |
|------|-----|-----|
| 连接方式 | 面向连接 | 无连接 |
| 可靠性 | 可靠（保证到达） | 不可靠（可能丢失） |
| 速度 | 慢 | 快 |
| 适用场景 | 网页、文件传输 | 视频、游戏、DNS |

**使用场景举例：**
- **TCP：** 浏览网页、下载文件、发送邮件
- **UDP：** 视频通话、游戏、DNS 查询

### 三次握手（TCP 连接建立）

```
客户端 ──────────────────────────────── 服务器

    │  ──── SYN（我想连接你）          │
    │ ──────────────────────────────→ │
    │                                  │
    │  ──── SYN+ACK（好的，同意）      │
    │ ←────────────────────────────── │
    │                                  │
    │  ──── ACK（确认连接）           │
    │ ──────────────────────────────→ │
    │                                  │
    │        ✓ 连接建立成功！          │
```

**为什么要三次？**
- 确保双方都能正常通信
- 防止已失效的连接请求被错误接受

### 四次挥手（TCP 连接断开）

```
客户端 ──────────────────────────────── 服务器

    │  ──── FIN（我要断开）            │
    │ ──────────────────────────────→ │
    │                                  │
    │  ──── ACK（好的）               │
    │ ←────────────────────────────── │
    │                                  │
    │  ──── FIN（我也断开）           │
    │ ←────────────────────────────── │
    │                                  │
    │  ──── ACK（确认）               │
    │ ──────────────────────────────→ │
    │                                  │
    │        ✓ 连接断开成功！          │
```

---

## 第四层：应用层（Application Layer）

### 🎯 核心问题
**如何让用户使用网络服务？**

### 💡 类比
就像**快递的"开箱服务"**：收件人拿到快递后，怎么使用里面的东西。

### 关键概念

这是**我们最熟悉的一层**，直接面向用户和应用。

### 常见应用层协议

| 协议 | 全称 | 用途 | 端口 |
|------|------|------|------|
| **HTTP** | HyperText Transfer Protocol | 网页浏览 | 80 |
| **HTTPS** | HTTP Secure | 安全网页浏览 | 443 |
| **FTP** | File Transfer Protocol | 文件传输 | 21 |
| **SMTP** | Simple Mail Transfer Protocol | 发送邮件 | 25 |
| **POP3/IMAP** | 邮件接收协议 | 接收邮件 | 110/143 |
| **DNS** | Domain Name System | 域名解析 | 53 |
| **SSH** | Secure Shell | 远程登录 | 22 |

### HTTP 请求流程

```
1. 浏览器输入: https://www.example.com

2. DNS 解析:
   www.example.com → 93.184.216.34

3. 建立 TCP 连接 (三次握手)

4. 发送 HTTP 请求:
   GET / HTTP/1.1
   Host: www.example.com

5. 服务器响应:
   HTTP/1.1 200 OK
   Content-Type: text/html
   
   <html>...</html>

6. 浏览器渲染页面

7. 关闭 TCP 连接 (四次挥手)
```

---

## 🔄 数据封装过程

了解了四层，我们来看看数据是如何逐层封装的：

```
┌──────────────────────────────────────────────────────────┐
│  应用层：你好！                                          │
│  ↓ 添加应用层头 (HTTP Header)                           │
├──────────────────────────────────────────────────────────┤
│  传输层：TCP Header + 数据                              │
│  ↓ 添加传输层头 (TCP Header，含端口)                    │
├──────────────────────────────────────────────────────────┤
│  网络层：IP Header + TCP 数据                           │
│  ↓ 添加网络层头 (IP Header，含源/目标 IP)               │
├──────────────────────────────────────────────────────────┤
│  链路层：Ethernet Header + IP 数据 + Trailer            │
│  ↓ 添加链路层头 (Ethernet Header，含源/目标 MAC)         │
└──────────────────────────────────────────────────────────┘
                         ↓
              010101010101010101...
```

**解封装过程相反：**

```
010101010101010101...
      ↓
      ├─→ 链路层：去掉 Ethernet Header
      ├─→ 网络层：去掉 IP Header
      ├─→ 传输层：去掉 TCP Header
      └─→ 应用层：拿到原始数据 "你好！"
```

---

## 🎯 四层模型总结

| 层级 | 名称 | 核心任务 | 关键协议 | 类比 |
|:---:|------|---------|---------|------|
| 第4层 | 应用层 | 用户服务接口 | HTTP, HTTPS, FTP | 寄件人/收件人 |
| 第3层 | 传输层 | 端到端可靠传输 | TCP, UDP | 快递公司服务 |
| 第2层 | 网络层 | 跨网络寻址 | IP, ICMP | 城市间运输 |
| 第1层 | 链路层 | 局域网内传输 | Ethernet, Wi-Fi | 小区内派送 |

---

## 💡 常见问题

### Q1：浏览器输入 URL 到显示页面，发生了什么？

```
1. DNS 解析（域名 → IP）
2. TCP 三次握手
3. 发送 HTTP 请求
4. 服务器处理请求
5. 返回 HTTP 响应
6. 浏览器渲染页面
7. TCP 四次挥手
```

### Q2：为什么需要分层？

- **模块化**：每层只做自己的事，互不干扰
- **灵活性**：可以替换某一层的实现（比如把 Wi-Fi 换成网线）
- **简化问题**：大问题拆成小问题，逐一解决

### Q3：四层 vs 七层模型？

- **四层模型（TCP/IP 模型）**：实际使用的模型，更简洁
- **七层模型（OSI 模型）**：理论模型，教学用

**实际开发中，我们主要用四层模型。**

---

## 🚀 写在最后

网络四层模型是理解互联网的**基石**。记住这个口诀：

```
链路层：找小区（MAC 地址）
网络层：找城市（IP 地址）
传输层：找房间（端口号）
应用层：开始用（HTTP、FTP 等）
```

理解了这四层，你就掌握了互联网的**底层逻辑**！

---

**下期预告：** TCP 和 UDP 的区别详解

---

**参考资料：**
- 《计算机网络：自顶向下方法》
- RFC 791 (IP 协议)
- RFC 793 (TCP 协议)
